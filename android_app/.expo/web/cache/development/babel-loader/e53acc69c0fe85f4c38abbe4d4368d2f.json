{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNativePaper = require(\"react-native-paper\");\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _constants = require(\"../../constants.js\");\n\nvar _reactNativeTableComponent = require(\"react-native-table-component\");\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _GetHeader = _interopRequireDefault(require(\"../../GetHeader\"));\n\nvar _syncStorage = _interopRequireDefault(require(\"sync-storage\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\Luna\\\\Desktop\\\\Diplomski\\\\Android\\\\android_app\\\\src\\\\pages\\\\Change.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Change = function (_Component) {\n  (0, _inherits2.default)(Change, _Component);\n\n  var _super = _createSuper(Change);\n\n  function Change() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Change);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      colors: [],\n      newColor: \"\"\n    };\n\n    _this.hasRole = function (reqRole) {\n      var roles = JSON.parse(_syncStorage.default.get(\"keyRole\"));\n      if (roles === null) return false;\n      if (reqRole === \"*\") return true;\n\n      for (var _iterator = _createForOfIteratorHelperLoose(roles), _step; !(_step = _iterator()).done;) {\n        var role = _step.value;\n        if (role === reqRole) return true;\n      }\n\n      return false;\n    };\n\n    _this.handleColorChange = function (event) {\n      _this.setState({\n        newColor: event.nativeEvent.text\n      });\n    };\n\n    _this.handleDeleteChange = function (e, o) {\n      if (!_this.hasRole(\"ROLE_ADMIN\")) {\n        _this.setState({\n          redirect: true\n        });\n      } else {\n        _axios.default.get(_constants.BASE_URL + \"/api/admin/deleteColor/\" + o.id, {\n          validateStatus: function validateStatus() {\n            return true;\n          },\n          headers: {\n            Authorization: (0, _GetHeader.default)()\n          }\n        }).then(function (res) {\n          if (res.status !== 401) {\n            console.log(res.data);\n            window.location.reload();\n          } else {\n            _this.setState({\n              redirect: true\n            });\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    };\n\n    _this.handleAdd = function () {\n      var colorDTO = {\n        color: _this.state.newColor\n      };\n      console.log(_this.state.newColor);\n\n      _axios.default.post(_constants.BASE_URL + \"/api/admin/newColor\", colorDTO, {\n        validateStatus: function validateStatus() {\n          return true;\n        },\n        headers: {\n          Authorization: (0, _GetHeader.default)()\n        }\n      }).then(function (res) {\n        window.location.reload();\n\n        if (res.status === 400) {\n          _this.setState({\n            hiddenFailAlert: false,\n            failHeader: \"Bad request\",\n            failMessage: \"Invalid argument.\"\n          });\n        } else if (res.status === 500) {\n          _this.setState({\n            hiddenFailAlert: false,\n            failHeader: \"Internal server error\",\n            failMessage: \"Server error.\"\n          });\n        } else if (res.status === 204) {\n          console.log(\"Success\");\n\n          _this.props.navigation.navigate('Change');\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(Change, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!this.hasRole(\"ROLE_ADMIN\")) {\n        this.setState({\n          redirect: true\n        });\n      } else {\n        _axios.default.get(_constants.BASE_URL + \"/api/admin/colors\", {\n          validateStatus: function validateStatus() {\n            return true;\n          },\n          headers: {\n            Authorization: (0, _GetHeader.default)()\n          }\n        }).then(function (res) {\n          if (res.status !== 401) {\n            console.log(res.data);\n\n            _this2.setState({\n              colors: res.data\n            });\n          } else {\n            _this2.setState({\n              redirect: true\n            });\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return _react.default.createElement(_reactNative.View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        className: \"control-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        className: \"form-group controls mb-0 pb-2\",\n        style: {\n          color: \"#6c757d\",\n          opacity: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, _react.default.createElement(_reactNative.TextInput, {\n        style: styles.inputView,\n        placeholder: \"Insert new color\",\n        className: \"form-control\",\n        id: \"name\",\n        type: \"text\",\n        onChange: this.handleColorChange,\n        value: this.state.newColor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }\n      }))), _react.default.createElement(_reactNative.View, {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNative.Button, {\n        style: {\n          background: \"#1977cc\",\n          marginTop: 2,\n          marginLeft: 4,\n          width: \"20%\"\n        },\n        onPress: this.handleAdd,\n        className: \"btn btn-primary btn-xl\",\n        id: \"sendMessageButton\",\n        type: \"button\",\n        title: \"Add color\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      })), _react.default.createElement(_reactNative.View, {\n        style: {\n          marginTop: 30\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNativePaper.DataTable, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, this.state.colors.map(function (o) {\n        return _react.default.createElement(_reactNativePaper.DataTable.Row, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }\n        }, _react.default.createElement(_reactNativePaper.DataTable.Cell, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 29\n          }\n        }, o.color), _react.default.createElement(_reactNativePaper.DataTable.Cell, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 29\n          }\n        }, _react.default.createElement(_reactNative.Button, {\n          onPress: function onPress(e) {\n            return _this3.handleDeleteChange(e, o);\n          },\n          title: \"DELETE\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 46\n          }\n        })));\n      }))));\n    }\n  }]);\n  return Change;\n}(_react.Component);\n\nvar _default = Change;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    marginLeft: 30,\n    marginRight: 30,\n    marginTop: 50\n  },\n  text: {\n    fontSize: 16\n  },\n  signupText: {\n    color: 'rgba(255,255,255,0.6)',\n    fontSize: 16\n  },\n  signupButton: {\n    color: '#ffffff',\n    fontSize: 16,\n    fontWeight: '500'\n  },\n  inputView: {\n    backgroundColor: \"#D3D3D3\",\n    borderRadius: 5,\n    height: 45,\n    marginTop: 10,\n    marginBottom: 10,\n    alignItems: \"center\",\n    color: \"black\"\n  },\n  google: {\n    borderRadius: 30,\n    marginBottom: 50\n  }\n});","map":{"version":3,"sources":["C:/Users/Luna/Desktop/Diplomski/Android/android_app/src/pages/Change.js"],"names":["Change","state","colors","newColor","hasRole","reqRole","roles","JSON","parse","SyncStorage","get","role","handleColorChange","event","setState","nativeEvent","text","handleDeleteChange","e","o","redirect","Axios","BASE_URL","id","validateStatus","headers","Authorization","then","res","status","console","log","data","window","location","reload","catch","err","handleAdd","colorDTO","color","post","hiddenFailAlert","failHeader","failMessage","props","navigation","navigate","styles","container","opacity","inputView","background","marginTop","marginLeft","width","map","Component","StyleSheet","create","marginRight","fontSize","signupText","signupButton","fontWeight","backgroundColor","borderRadius","height","marginBottom","alignItems","google"],"mappings":"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","sourcesContent":["\r\nimport React, { Component } from 'react';\r\nimport {\r\n    StyleSheet,\r\n    Text,\r\n    View,\r\n    StatusBar,\r\n    TouchableOpacity,\r\n    Button,\r\n    TextInput,\r\n} from 'react-native';\r\n\r\nimport { DataTable } from 'react-native-paper';\r\nimport Axios from \"axios\";\r\nimport { BASE_URL } from \"../../constants.js\";\r\nimport { Table, TableWrapper, Row, Rows, Col, Cols, Cell } from 'react-native-table-component';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport getAuthHeader from \"../../GetHeader\";\r\nimport SyncStorage from 'sync-storage';\r\n\r\nclass Change extends Component {\r\n    state = {\r\n        colors: [],\r\n        newColor: \"\",\r\n    };\r\n\r\n\r\n\r\n    hasRole = (reqRole) => {\r\n\r\n        let roles = JSON.parse(SyncStorage.get(\"keyRole\"));\r\n        if (roles === null) return false;\r\n\r\n        if (reqRole === \"*\") return true;\r\n\r\n        for (let role of roles) {\r\n            if (role === reqRole) return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    componentDidMount() {\r\n        if (!this.hasRole(\"ROLE_ADMIN\")) {\r\n            this.setState({ redirect: true });\r\n        } else {\r\n            Axios.get(BASE_URL + \"/api/admin/colors\", { validateStatus: () => true, headers: { Authorization: getAuthHeader() } })\r\n                .then((res) => {\r\n                    if (res.status !== 401) {\r\n                        console.log(res.data)\r\n                        this.setState({\r\n                            colors: res.data,\r\n                        });\r\n\r\n                    } else {\r\n                        this.setState({ redirect: true });\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        }\r\n    }\r\n\r\n    handleColorChange = (event) => {\r\n        this.setState({ newColor: event.nativeEvent.text });\r\n    };\r\n\r\n\r\n    handleDeleteChange = (e, o) => {\r\n        if (!this.hasRole(\"ROLE_ADMIN\")) {\r\n            this.setState({ redirect: true });\r\n        } else {\r\n            Axios.get(BASE_URL + \"/api/admin/deleteColor/\" + o.id, { validateStatus: () => true, headers: { Authorization: getAuthHeader() } })\r\n                .then((res) => {\r\n                    if (res.status !== 401) {\r\n                        console.log(res.data)\r\n                        window.location.reload();\r\n                    } else {\r\n                        this.setState({ redirect: true });\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        }\r\n\r\n\r\n    };\r\n    handleAdd = () => {\r\n        let colorDTO = {\r\n            color: this.state.newColor,\r\n        }\r\n        console.log(this.state.newColor);\r\n\r\n        Axios.post(BASE_URL + \"/api/admin/newColor\", colorDTO, {\r\n            validateStatus: () => true,\r\n            headers: { Authorization: getAuthHeader() },\r\n        })\r\n            .then((res) => {\r\n                window.location.reload();\r\n                if (res.status === 400) {\r\n                    this.setState({ hiddenFailAlert: false, failHeader: \"Bad request\", failMessage: \"Invalid argument.\" });\r\n                } else if (res.status === 500) {\r\n                    this.setState({ hiddenFailAlert: false, failHeader: \"Internal server error\", failMessage: \"Server error.\" });\r\n                } else if (res.status === 204) {\r\n                    console.log(\"Success\");\r\n                    this.props.navigation.navigate('Change')\r\n\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n            });\r\n\r\n\r\n\r\n    };\r\n\r\n    render() {\r\n\r\n\r\n        return (\r\n\r\n\r\n\r\n            <View style={styles.container}>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                <View className=\"control-group\">\r\n                    <View className=\"form-group controls mb-0 pb-2\" style={{ color: \"#6c757d\", opacity: 1 }}>\r\n                        <TextInput\r\n                            style={styles.inputView}\r\n                            placeholder=\"Insert new color\"\r\n                            className=\"form-control\"\r\n                            id=\"name\"\r\n                            type=\"text\"\r\n                            onChange={this.handleColorChange}\r\n                            value={this.state.newColor}\r\n                        />\r\n                    </View>\r\n\r\n                </View>\r\n\r\n                <View className=\"form-group\">\r\n                    <Button\r\n                        style={{ background: \"#1977cc\", marginTop: 2, marginLeft: 4, width: \"20%\" }}\r\n                        onPress={this.handleAdd}\r\n                        className=\"btn btn-primary btn-xl\"\r\n                        id=\"sendMessageButton\"\r\n                        type=\"button\"\r\n                        title=\"Add color\"\r\n                    >\r\n                    </Button>\r\n                </View>\r\n                <View style={{marginTop: 30}}>\r\n                <DataTable>\r\n\r\n\r\n\r\n                    {this.state.colors.map((o) => (\r\n\r\n                        <DataTable.Row>\r\n                            <DataTable.Cell>{o.color}</DataTable.Cell>\r\n                            <DataTable.Cell ><Button onPress={(e) => this.handleDeleteChange(e, o)} title=\"DELETE\"></Button></DataTable.Cell>\r\n\r\n                        </DataTable.Row>\r\n\r\n\r\n\r\n                    ))}\r\n                </DataTable>\r\n                </View>\r\n\r\n            </View>\r\n\r\n\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Change;\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        marginLeft: 30,\r\n        marginRight: 30,\r\n        marginTop: 50\r\n    },\r\n    text: {\r\n        fontSize: 16\r\n    },\r\n    signupText: {\r\n        color: 'rgba(255,255,255,0.6)',\r\n        fontSize: 16\r\n    },\r\n    signupButton: {\r\n        color: '#ffffff',\r\n        fontSize: 16,\r\n        fontWeight: '500'\r\n    },\r\n    inputView: {\r\n        backgroundColor: \"#D3D3D3\",\r\n        borderRadius: 5,\r\n        height: 45,\r\n        marginTop: 10,\r\n        marginBottom: 10,\r\n        alignItems: \"center\",\r\n        color: \"black\"\r\n    },\r\n    google: {\r\n        borderRadius: 30,\r\n        marginBottom: 50\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"script"}