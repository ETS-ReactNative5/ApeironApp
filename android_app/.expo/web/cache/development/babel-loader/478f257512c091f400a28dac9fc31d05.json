{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\nvar _constants = require(\"../../constants.js\");\n\nvar _naslovnaDuks = _interopRequireDefault(require(\"../static/naslovna-duks.png\"));\n\nvar _Order = _interopRequireDefault(require(\"../components/Order\"));\n\nvar _GetHeader = _interopRequireDefault(require(\"../../GetHeader\"));\n\nvar _ModalDialog = _interopRequireDefault(require(\"../components/ModalDialog\"));\n\nvar _reactNativePaper = require(\"react-native-paper\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _syncStorage = _interopRequireDefault(require(\"sync-storage\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\Luna\\\\Desktop\\\\Diplomski\\\\Android\\\\android_app\\\\src\\\\pages\\\\QRCodes.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar QRCodes = function (_Component) {\n  (0, _inherits2.default)(QRCodes, _Component);\n\n  var _super = _createSuper(QRCodes);\n\n  function QRCodes() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, QRCodes);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      tshirts: [],\n      formShowed: false,\n      name: \"\",\n      city: \"\",\n      gradeFrom: \"\",\n      gradeTo: \"\",\n      distanceFrom: \"\",\n      distanceTo: \"\",\n      showingSearched: false,\n      showingSorted: false,\n      currentLatitude: null,\n      currentLongitude: null,\n      sortIndicator: 0,\n      redirect: false,\n      redirectUrl: \"\",\n      showOrderModal: false,\n      handleOrderModalClose: false,\n      shirt: \"\",\n      selectedColor: \"\",\n      showedColors: [],\n      colors: [],\n      selectedSize: \"\",\n      showedSizes: [],\n      sizes: [],\n      openModal: false\n    };\n\n    _this.hasRole = function (reqRole) {\n      var roles = JSON.parse(_syncStorage.default.get(\"keyRole\"));\n      if (roles === null) return false;\n      if (reqRole === \"*\") return true;\n\n      for (var _iterator = _createForOfIteratorHelperLoose(roles), _step; !(_step = _iterator()).done;) {\n        var role = _step.value;\n        if (role === reqRole) return true;\n      }\n\n      return false;\n    };\n\n    _this.handleNameChange = function (event) {\n      _this.setState({\n        name: event.nativeEvent.text\n      });\n    };\n\n    _this.handleModalClose = function () {\n      _this.setState({\n        openModal: false\n      });\n\n      window.location.reload();\n    };\n\n    _this.getCurrentCoords = function () {\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n          _this.setState({\n            currentLatitude: position.coords.latitude,\n            currentLongitude: position.coords.longitude\n          });\n        });\n      }\n    };\n\n    _this.hangleFormToogle = function () {\n      _this.setState({\n        formShowed: !_this.state.formShowed\n      });\n    };\n\n    _this.handleDelete = function (e, id) {\n      _axios.default.get(_constants.BASE_URL + \"/api/items/delete/\" + id).then(function (res) {\n        _this.setState({\n          openModal: true\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.handleGradeFromChange = function (event) {\n      if (event.nativeEvent.text < 0) _this.setState({\n        gradeFrom: 0\n      });else _this.setState({\n        gradeFrom: event.nativeEvent.text\n      });\n    };\n\n    _this.handleGradeToChange = function (event) {\n      if (event.nativeEvent.text > 5) _this.setState({\n        gradeTo: 5\n      });else _this.setState({\n        gradeTo: event.nativeEvent.text\n      });\n    };\n\n    _this.handleDistanceFromChange = function (event) {\n      _this.setState({\n        distanceFrom: event.nativeEvent.text\n      });\n    };\n\n    _this.handleDistanceToChange = function (event) {\n      _this.setState({\n        distanceTo: event.nativeEvent.text\n      });\n    };\n\n    _this.handleCityChange = function (event) {\n      _this.setState({\n        city: event.nativeEvent.text\n      });\n    };\n\n    _this.handleClickOnPharmacy = function (id) {\n      _this.setState({\n        shirt: id\n      });\n\n      _this.setState({\n        showOrderModal: true\n      });\n\n      _this.setState({\n        colors: id.colors\n      });\n    };\n\n    _this.handleOrderModalClose = function () {\n      _this.setState({\n        showOrderModal: false\n      });\n    };\n\n    _this.handleColorChange = function (e) {\n      var u = [];\n\n      _this.setState({\n        selectedColor: e.nativeEvent.text\n      }, function () {\n        console.log(_this.state);\n      });\n\n      _this.state.colors.forEach(function (chain) {\n        if (chain.color === e.nativeEvent.text) {\n          u.push(chain.sizes);\n        }\n      });\n\n      _this.state.sizes = u;\n\n      _this.setState({\n        sizes: u\n      });\n\n      _this.setState({\n        showedSizes: u\n      });\n\n      _this.changeEndEntityChain(e.nativeEvent.text);\n    };\n\n    _this.changeEndEntityChain = function (e) {\n      if (e === \"\") {\n        _this.setState({\n          showedColors: _this.state.colors\n        });\n      } else {\n        var u = [];\n\n        _this.state.colors.forEach(function (chain) {\n          if (chain.color !== e) {\n            u.push(chain);\n          }\n        });\n\n        _this.setState({\n          showedColors: u\n        });\n      }\n    };\n\n    _this.handleSizeChange = function (e) {\n      _this.setState({\n        selectedSize: e.nativeEvent.text\n      }, function () {\n        console.log(_this.state);\n      });\n\n      _this.changeEndEntitySizeChain(e.nativeEvent.text);\n    };\n\n    _this.changeEndEntitySizeChain = function (e) {\n      if (e === \"\") {\n        _this.setState({\n          showedSizes: _this.state.sizes\n        });\n      } else {\n        var u = [];\n\n        _this.state.sizes.forEach(function (chain) {\n          if (chain.size !== e) {\n            u.push(chain);\n          }\n        });\n\n        _this.setState({\n          showedSizes: u\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(QRCodes, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.hasRole(\"ROLE_ADMIN\")) {\n        _axios.default.get(_constants.BASE_URL + \"/api/reservations/getQR\").then(function (res) {\n          _this2.setState({\n            tshirts: res.data\n          });\n\n          console.log(res.data);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      } else if (this.hasRole(\"ROLE_DELIVERY\")) {\n        _axios.default.get(_constants.BASE_URL + \"/api/reservations/getQRCourier\", {\n          headers: {\n            Authorization: (0, _GetHeader.default)()\n          }\n        }).then(function (res) {\n          _this2.setState({\n            tshirts: res.data\n          });\n\n          console.log(res.data);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return _react.default.createElement(_reactNative.View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 4\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 5\n        }\n      }, _react.default.createElement(_reactNativePaper.DataTable, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 6\n        }\n      }, this.state.tshirts.map(function (pharmacy) {\n        return _react.default.createElement(_reactNative.View, {\n          key: pharmacy.user,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 9\n          }\n        }, _react.default.createElement(_reactNative.View, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 11\n          }\n        }, _react.default.createElement(_reactNative.Text, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 12\n          }\n        }, \"User: \"), _react.default.createElement(_reactNative.Text, {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 31\n          }\n        }, \" \", pharmacy.user)), _react.default.createElement(_reactNative.Image, {\n          style: styles.image,\n          source: {\n            uri: pharmacy.files[0]\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 11\n          }\n        }));\n      }))), _react.default.createElement(_ModalDialog.default, {\n        show: this.state.openModal,\n        onCloseModal: this.handleModalClose,\n        header: \"Success\",\n        text: \"You have successfully removed the item.\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 5\n        }\n      }));\n    }\n  }]);\n  return QRCodes;\n}(_react.Component);\n\nvar _default = QRCodes;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  loginText: {\n    flex: 1,\n    padding: 3,\n    marginLeft: 50,\n    fontWeight: \"bold\"\n  },\n  image: {\n    marginTop: 20,\n    marginLeft: 50,\n    width: 300,\n    height: 300\n  },\n  loginBtn: {\n    borderRadius: 25\n  }\n});","map":{"version":3,"sources":["C:/Users/Luna/Desktop/Diplomski/Android/android_app/src/pages/QRCodes.js"],"names":["QRCodes","state","tshirts","formShowed","name","city","gradeFrom","gradeTo","distanceFrom","distanceTo","showingSearched","showingSorted","currentLatitude","currentLongitude","sortIndicator","redirect","redirectUrl","showOrderModal","handleOrderModalClose","shirt","selectedColor","showedColors","colors","selectedSize","showedSizes","sizes","openModal","hasRole","reqRole","roles","JSON","parse","SyncStorage","get","role","handleNameChange","event","setState","nativeEvent","text","handleModalClose","window","location","reload","getCurrentCoords","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","hangleFormToogle","handleDelete","e","id","Axios","BASE_URL","then","res","catch","err","console","log","handleGradeFromChange","handleGradeToChange","handleDistanceFromChange","handleDistanceToChange","handleCityChange","handleClickOnPharmacy","handleColorChange","u","forEach","chain","color","push","changeEndEntityChain","handleSizeChange","changeEndEntitySizeChain","size","data","headers","Authorization","map","pharmacy","user","styles","image","uri","files","Component","StyleSheet","create","container","flex","backgroundColor","alignItems","justifyContent","loginText","padding","marginLeft","fontWeight","marginTop","width","height","loginBtn","borderRadius"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { BASE_URL } from \"../../constants.js\";\r\nimport PharmacyLogo from \"../static/naslovna-duks.png\";\r\nimport Order from \"../components/Order\";\r\nimport getAuthHeader from \"../../GetHeader\";\r\nimport ModalDialog from \"../components/ModalDialog\";\r\n\r\nimport { DataTable } from 'react-native-paper';\r\nimport {\r\n\tStyleSheet,\r\n\tText,\r\n\tView,\r\n\tStatusBar,\r\n\tTouchableOpacity,\r\n\tButton,\r\n\tTextInput,\r\n\tImage,\r\n\tTable,\r\n\tScrollView,\r\n\tTouchableHighlight\r\n} from 'react-native';\r\nimport SyncStorage from 'sync-storage';\r\nclass QRCodes extends Component {\r\n\tstate = {\r\n\t\ttshirts: [],\r\n\t\tformShowed: false,\r\n\t\tname: \"\",\r\n\t\tcity: \"\",\r\n\t\tgradeFrom: \"\",\r\n\t\tgradeTo: \"\",\r\n\t\tdistanceFrom: \"\",\r\n\t\tdistanceTo: \"\",\r\n\t\tshowingSearched: false,\r\n\t\tshowingSorted: false,\r\n\t\tcurrentLatitude: null,\r\n\t\tcurrentLongitude: null,\r\n\t\tsortIndicator: 0,\r\n\t\tredirect: false,\r\n\t\tredirectUrl: \"\",\r\n\t\tshowOrderModal: false,\r\n\t\thandleOrderModalClose: false,\r\n\t\tshirt: \"\",\r\n\t\tselectedColor: \"\",\r\n\t\tshowedColors: [],\r\n\t\tcolors: [],\r\n\t\tselectedSize: \"\",\r\n\t\tshowedSizes: [],\r\n\t\tsizes: [],\r\n\t\topenModal: false,\r\n\r\n\r\n\t};\r\n\r\n\thasRole = (reqRole) => {\r\n        let roles = JSON.parse(SyncStorage.get(\"keyRole\"));\r\n\r\n        if (roles === null) return false;\r\n\r\n        if (reqRole === \"*\") return true;\r\n\r\n        for (let role of roles) {\r\n            if (role === reqRole) return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n\thandleNameChange = (event) => {\r\n\t\tthis.setState({ name: event.nativeEvent.text });\r\n\t};\r\n\thandleModalClose = () => {\r\n\t\tthis.setState({ openModal: false });\r\n\t\twindow.location.reload();\r\n\t};\r\n\tgetCurrentCoords = () => {\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcurrentLatitude: position.coords.latitude,\r\n\t\t\t\t\tcurrentLongitude: position.coords.longitude,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\tif (this.hasRole(\"ROLE_ADMIN\")) {\r\n\t\t\tAxios.get(BASE_URL + \"/api/reservations/getQR\")\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.setState({ tshirts: res.data });\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n        }\r\n\r\n\t\telse if (this.hasRole(\"ROLE_DELIVERY\")) {\r\n\t\t\tAxios.get(BASE_URL + \"/api/reservations/getQRCourier\" ,{headers: { Authorization: getAuthHeader() } })\r\n\t\t\t.then((res) => {\r\n\t\t\t\tthis.setState({ tshirts: res.data });\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n        } \r\n\t\r\n\t}\r\n\r\n\thangleFormToogle = () => {\r\n\t\tthis.setState({ formShowed: !this.state.formShowed });\r\n\t};\r\n\r\n\thandleDelete = (e,id) => {\r\n\t\tAxios.get(BASE_URL + \"/api/items/delete/\" + id)\r\n\t\t\t.then((res) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({ openModal: true });\r\n\t\t\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\r\n\t};\r\n\r\n\thandleGradeFromChange = (event) => {\r\n\t\tif (event.nativeEvent.text < 0) this.setState({ gradeFrom: 0 });\r\n\t\telse this.setState({ gradeFrom: event.nativeEvent.text });\r\n\t};\r\n\r\n\thandleGradeToChange = (event) => {\r\n\t\tif (event.nativeEvent.text > 5) this.setState({ gradeTo: 5 });\r\n\t\telse this.setState({ gradeTo: event.nativeEvent.text });\r\n\t};\r\n\r\n\thandleDistanceFromChange = (event) => {\r\n\t\tthis.setState({ distanceFrom: event.nativeEvent.text });\r\n\t};\r\n\r\n\thandleDistanceToChange = (event) => {\r\n\t\tthis.setState({ distanceTo: event.nativeEvent.text });\r\n\t};\r\n\r\n\thandleCityChange = (event) => {\r\n\t\tthis.setState({ city: event.nativeEvent.text });\r\n\t};\r\n\r\n\r\n\r\n\thandleClickOnPharmacy = (id) => {\r\n\t\tthis.setState({ shirt: id });\r\n\t\tthis.setState({ showOrderModal: true });\r\n\t\tthis.setState({ colors: id.colors });\r\n\r\n\t};\r\n\r\n\thandleOrderModalClose = () => {\r\n\t\tthis.setState({ showOrderModal: false });\r\n\t};\r\n\r\n\thandleColorChange = (e) => {\r\n\r\n\t\tlet u = [];\r\n\t\tthis.setState({ selectedColor: e.nativeEvent.text }, () => {\r\n\t\t\tconsole.log(this.state);\r\n\t\t});\r\n\t\tthis.state.colors.forEach((chain) => {\r\n\t\t\tif (chain.color === e.nativeEvent.text) {\r\n\t\t\t\tu.push(chain.sizes);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\r\n\t\tthis.state.sizes = u;\r\n\t\tthis.setState({ sizes: u });\r\n\t\tthis.setState({ showedSizes: u });\r\n\t\tthis.changeEndEntityChain(e.nativeEvent.text);\r\n\t};\r\n\r\n\tchangeEndEntityChain = (e) => {\r\n\t\tif (e === \"\") {\r\n\t\t\tthis.setState({ showedColors: this.state.colors });\r\n\t\t} else {\r\n\t\t\tlet u = [];\r\n\t\t\tthis.state.colors.forEach((chain) => {\r\n\t\t\t\tif (chain.color !== e) {\r\n\t\t\t\t\tu.push(chain);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({ showedColors: u });\r\n\t\t}\r\n\t};\r\n\r\n\thandleSizeChange = (e) => {\r\n\t\tthis.setState({ selectedSize: e.nativeEvent.text }, () => {\r\n\t\t\tconsole.log(this.state);\r\n\t\t});\r\n\t\tthis.changeEndEntitySizeChain(e.nativeEvent.text);\r\n\t};\r\n\r\n\tchangeEndEntitySizeChain = (e) => {\r\n\t\tif (e === \"\") {\r\n\t\t\tthis.setState({ showedSizes: this.state.sizes });\r\n\t\t} else {\r\n\t\t\tlet u = [];\r\n\t\t\tthis.state.sizes.forEach((chain) => {\r\n\t\t\t\tif (chain.size !== e) {\r\n\t\t\t\t\tu.push(chain);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.setState({ showedSizes: u });\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\r\n\t\treturn (\r\n\r\n\t\t\t<View>\r\n\t\t\t\t<View >\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t\t<DataTable  >\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{this.state.tshirts.map((pharmacy) => (\r\n\t\t\t\t\t\t\t\t<View key={pharmacy.user}>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<View>\r\n\t\t\t\t\t\t\t\t\t\t\t<Text>User: </Text><Text> {pharmacy.user}</Text>\r\n\t\t\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<Image  style={styles.image}  source={{uri: pharmacy.files[0]} } />\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t</DataTable  >\r\n\t\t\t\t</View>\r\n\t\t\t\t<ModalDialog\r\n                    show={this.state.openModal}\r\n                    onCloseModal={this.handleModalClose}\r\n                    header=\"Success\"\r\n                    text=\"You have successfully removed the item.\"\r\n                />\r\n\r\n\t\t\t\t\r\n\t\t\t\t</View>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default QRCodes;\r\n\r\nconst styles = StyleSheet.create({\r\n\tcontainer: {\r\n\t\tflex: 1,\r\n\t\tbackgroundColor: \"#fff\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n\tloginText: {\r\n\t\tflex: 1,\r\n\t\tpadding: 3,\r\n\t\tmarginLeft: 50,\r\n\t\tfontWeight: \"bold\"\r\n\t},\r\n\timage: {\r\n\t\tmarginTop: 20,\r\n\t\tmarginLeft: 50,\r\n\t\twidth: 300,\r\n\t\theight: 300,\r\n\t},\r\n\tloginBtn: {\r\n\r\n\t\tborderRadius: 25,\r\n\r\n\t},\r\n\r\n});\r\n"]},"metadata":{},"sourceType":"script"}